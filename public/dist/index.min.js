$(document).ready(()=>{function a(a){$("#search").empty(),$("#search").append(`      
    <div id="movie-search-list">
    </div>
    `),$.ajax({url:`/api/mediaSearch/${a}`,method:"GET"}).then(b=>{if(0===b.length){$("#movie-search-list").append(`
           
            <div class="card mb-3" style="max-width: 340px; float: canter; margin: 5px;">
            <div class="row no-gutters">         
            <div class="col-md-4">    
                  <img class="card-img-top"  src="https://st2.depositphotos.com/1001911/7684/v/450/depositphotos_76840879-stock-illustration-depressed-emoticon.jpg" alt="sad face">
                  </div>
            <div class="col-md-8">
                  <div class="card-body">
                   
                  <p class="card-text text-dark">No results found for "${a}". Sorry. Check your spelling.</p>
                   
                </div>
                </div>
                </div>   
                 
            </div>


          `)}else for(let a of b){console.log(a);let b=`
            <div class="card mb-3" style="max-width: 340px; float: right; margin: 5px;">
            <div class="row no-gutters">         
            <div class="col-md-4">    
                  <img class="card-img-top"  src="http://image.tmdb.org/t/p/w185//${a.mediaPoster}" alt="${a.mediaTitle}">
                  </div>
            <div class="col-md-8">
                  <div class="card-body">
                  <h5 class="card-title text-dark"">${a.mediaTitle}</h5>
                  <p class="card-text text-dark">${a.movieYear}</p>
                  <a data-title="${a.mediaTitle}" data-image="http://image.tmdb.org/t/p/w185//${a.mediaPoster}" data-overview="${a.mediaPlot}" href="#ex1" rel="modal:open" id="watchlist-button" class="btn btn-primary">Add to Watchlist</a>
                  </div>
                </div>
                </div>   
                 
            </div>
                       
                     
            `;$("#movie-search-list").append(b)}})}setTimeout(function(){let a=new Glide(".showcase",{type:"carousel",autoplay:3500,perView:6}),b=new Glide(".search",{type:"carousel",autoplay:3500,perView:6});a.mount(),b.mount()},2e3),$("#myModal").on("shown.bs.modal",function(){$("#myInput").trigger("focus")});(()=>{$("#showcase").append(`    
          
    <div class="glide showcase">
    <div class="glide__track" data-glide-el="track">
      <ul class="glide__slides" id="movie-bottom-list">        
      </ul>
    </div>
  </div>
`),$("#poster").click(function(){alert("test")}),$.ajax({url:"/api/trending/",method:"GET"}).then(a=>{let b=a.media;b.forEach(a=>{let b=`
                  
                  <li class="glide__slide">
<img src="http://image.tmdb.org/t/p/w185//${a.poster_path}" id="poster" alt="${a.title}">
<a data-title="${a.original_title}" data-image="http://image.tmdb.org/t/p/w185//${a.poster_path}" data-overview="${a.overview}" href="#ex1" rel="modal:open" id="watchlist-button" class="btn btn-primary">Add to Watchlist</a>
      </li>
`;$("#movie-bottom-list").prepend(b)})})})(),function(){$.ajax("/api/providers",{method:"POST",data:{name:"hulu",icon:"placeholder"}}).then(a=>{console.log(a+"added")})}(),$("#submit").on("click",()=>{let b=$("#submit-query").val();a(b)});let b=()=>{$("#search").append(`      
        <div class="glide search">
    <div class="glide__track" data-glide-el="track">
    <ul class="glide__slides" id="movie-top-list">        
    </ul>
    </div>
    </div>
    `),$.ajax({url:"/api/tenShows/",method:"GET"}).then(a=>{let b=a.media;b.forEach(a=>{let b=`
                <li class="glide__slide">
                <img src="http://image.tmdb.org/t/p/w185//${a.poster_path}" alt="${a.title}">
                <a data-title="${a.name}" data-image="http://image.tmdb.org/t/p/w185//${a.poster_path}" data-overview="${a.overview}" href="#ex1" rel="modal:open" id="watchlist-button" class="btn btn-primary">Add to Watchlist</a>
                </li>
`;$("#movie-top-list").prepend(b)})})};$("#tv-shows-button").on("click",a=>{a.preventDefault(),$("#movie-top-list").ready(function(){$("#movie-bottom-list").hide(),b()})}),b();let c=()=>{$("#search").empty(),$("#search").append(`      
        <div class="glide search">
        <div class="glide__track" data-glide-el="track">
        <ul class="glide__slides" id="movie-top-list">        
      </ul>
      </div>
      </div>
`),$.ajax({url:"/api/tenMovies/",method:"GET"}).then(a=>{let b=a.media;console.log(b),b.forEach(a=>{let b=`
                  <li class="glide__slide">
<img src="http://image.tmdb.org/t/p/w185//${a.poster_path}" alt="${a.original_title}">
<a data-title="${a.original_title}" data-image="http://image.tmdb.org/t/p/w185//${a.poster_path}" data-overview="${a.overview}" href="#ex1" rel="modal:open" id="watchlist-button" class="btn btn-primary">Add to Watchlist</a>
      </li>
`;$("#movie-top-list").prepend(b)})})};$("#movies-button").on("click",a=>{a.preventDefault(),$("#movie-top-list").ready(function(){$("#movie-bottom-list").hide(),c()})}),$("#media-delete").on("click",function(){var a=$(this).data("listid");$.ajax("/api/media/"+a,{type:"DELETE"}).then(function(){console.log("List was deleted"),location.reload()})});const d=a=>{console.log("about to create media",a),$.ajax("/api/media",{method:"POST",data:a}).then(function(){console.log("created movie",a)}).catch(function(){console.log("there was an error creating movie",a)})},e=async(a,b)=>{console.log("about to get lists for user",a),$.ajax(`/api/users/${a}/lists`,{method:"GET"}).then(function(a){console.log("lists",a),b(a)}).catch(function(){console.log("there was an error ")})},f=(a,b)=>{console.log("about to get movies in list",a),$.ajax(`api/lists/${a}/media`,{method:"GET"}).then(function(a){console.log("media",a),b(a)}).catch(function(){console.log("there was an error ")})},g=(a,b)=>{let c={name:b,userId:a};console.log("about to create list",c),$.ajax("/api/lists",{method:"POST",data:c}).then(function(){console.log("Created list",c)}).catch(function(){console.log("something failed",c)})},h=a=>{console.log("about to delete list",a),$.ajax(`/api/lists/${a}`,{method:"DELETE"}).then(function(){console.log("deleted list",a)}).catch(function(){console.log("something failed",a)})};if($(".container-fluid").on("click","#watchlist-button",function(){let a="",b="",c="";a=$(this).data("title"),b=$(this).data("overview"),c=$(this).data("image"),console.log(a,c,b);let f=$("#current-user").data("user");console.log(f),$("#ex1").empty();e(f,a=>{a.forEach(a=>{let b=`
            <li class="list-group-item" data-listid="${a.id}" id="pickList">${a.name}</li>
          `;$("#ex1").append(b)})}),$("#ex1").on("click","#pickList",function(){let e=$(this).data("listid");console.log(e),d({title:a,media_type:"movie",external_id:"45646fsdsag",summary:b,icon:c,listId:e,provider:"hulu"}),a="",b="",c="",$("#ex1").hide(),$(".jquery-modal").hide()})}),$("#watchlist-view").on("click",function(){let a=$("#current-user").data("user"),b=prompt("enter list name");g(a,b),buildLists(),location.reload()}),$("#watchlists").on("click","#watchlist-view",function(){let a=$(this).data("listid");console.log(a);f(a,a=>{let b=a.media;console.log(a.media),$("#watchlists").empty(),$("#watchlist-view").hide(),b.forEach(a=>{let b=`
                <div class="card card-taller mb-4" style="max-width: 340px; float: right; margin: 2px;">
                <div class="row no-gutters">         
                <div class="col-md-4">    
                      <img class="card-img-top"  src="${a.icon}" alt="${a.title}">
                      </div>
                <div class="col-md-8">
                      <div class="card-body">
                      <h5 class="card-title text-dark"">${a.title}</h5>

                      <p class="card-text text-dark text" style="font-weight: bold;">${a.summary}<br>Type: ${a.media_type}</p>
                      </div>
                    </div>
                    </div>                  
                </div>
      `;0!==a.title.length&&$("#watchlists").append(b)})})}),$("#watchlists").on("click","#watchlist-remove",function(){let a=$(this).data("listid"),b=$("#current-user").data("user");h(a),buildLists(),location.reload()}),"http://localhost:8080/watchlists"===window.location.href||"http://www.dasflix.com/watchlists"===window.location.href){(function(){let a=$("#current-user").data("user");e(a,a=>{$("#watchlists").empty(),a.forEach(a=>{let b=`
          <li class="watchlist-box d-flex flex-column justify-content-around align-items-center">
          <div>
                        <h2>${a.name}</h2>
                        </div>
                    <div class="d-flex">
                    <a data-listid="${a.id}" href="#view" id="watchlist-view" class="btn btn-primary">View Watchlist</a>
                    <a data-listid="${a.id}" "href="#remove" id="watchlist-remove" class="btn btn-primary">Remove Watchlist</a>
                    </div>
                </li>
                `;$("#watchlists").append(b)})})})()}});